<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ai-gateway/concepts/upstreams" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Upstreams | NeuralTrust Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.neuraltrust.ai/img/neuraltrust-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.neuraltrust.ai/img/neuraltrust-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.neuraltrust.ai/ai-gateway/concepts/upstreams"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Upstreams | NeuralTrust Docs"><meta data-rh="true" name="description" content="An upstream represents a virtual hostname that can be used to load balance incoming requests across multiple services (targets). In AI Gateway, upstreams define where and how requests are forwarded to backend AI services."><meta data-rh="true" property="og:description" content="An upstream represents a virtual hostname that can be used to load balance incoming requests across multiple services (targets). In AI Gateway, upstreams define where and how requests are forwarded to backend AI services."><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.neuraltrust.ai/ai-gateway/concepts/upstreams"><link data-rh="true" rel="alternate" href="https://docs.neuraltrust.ai/ai-gateway/concepts/upstreams" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.neuraltrust.ai/ai-gateway/concepts/upstreams" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://HW1BIJOXAK-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.ef499ef0.css">
<script src="/assets/js/runtime~main.b79bf603.js" defer="defer"></script>
<script src="/assets/js/main.afacf4ad.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="NeuralTrust Logo" class="navbar-logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="NeuralTrust Logo" class="navbar-logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">NeuralTrust</b></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://github.com/NeuralTrust/TrustGate" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://neuraltrustcommunity.slack.com/join/shared_invite/zt-2xl47cag6-_HFNpltIULnA3wh4R6AqBg" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Slack community"></a><a href="https://linkedin.com/company/neuraltrust" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="LinkedIn page"></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/category/trustgate">TrustGate</a><button aria-label="Collapse sidebar category &#x27;TrustGate&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/category/getting-started">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/category/key-concepts">Key Concepts</a><button aria-label="Collapse sidebar category &#x27;Key Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-gateway/concepts/gateway">Gateway</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-gateway/concepts/services">Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ai-gateway/concepts/upstreams">Upstreams</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-gateway/concepts/rules">Rules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-gateway/concepts/plugins">Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-gateway/concepts/traffic-management">Traffic Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-gateway/concepts/consumer-groups">Consumer Groups</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/category/guides">Guides</a><button aria-label="Expand sidebar category &#x27;Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/category/plugins">Plugins</a><button aria-label="Expand sidebar category &#x27;Plugins&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/category/api">API</a><button aria-label="Expand sidebar category &#x27;API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-gateway/benchmark">Benchmark</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/trusttest">TrustTest</a><button aria-label="Expand sidebar category &#x27;TrustTest&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/trustlens">TrustLens</a><button aria-label="Expand sidebar category &#x27;TrustLens&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/sdks">SDKs</a><button aria-label="Expand sidebar category &#x27;SDKs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/category/trustgate"><span itemprop="name">TrustGate</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/category/key-concepts"><span itemprop="name">Key Concepts</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Upstreams</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Upstreams</h1></header>
<p>An upstream represents a virtual hostname that can be used to load balance incoming requests across multiple services (targets). In AI Gateway, upstreams define where and how requests are forwarded to backend AI services.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upstream-structure">Upstream Structure<a href="#upstream-structure" class="hash-link" aria-label="Direct link to Upstream Structure" title="Direct link to Upstream Structure">​</a></h2>
<p>An upstream consists of:</p>
<ul>
<li><strong>Name</strong>: A unique identifier for the upstream</li>
<li><strong>Algorithm</strong>: Load balancing algorithm to use</li>
<li><strong>Targets</strong>: List of backend services</li>
<li><strong>Health Checks</strong>: Configuration for monitoring target health</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-balancing">Load Balancing<a href="#load-balancing" class="hash-link" aria-label="Direct link to Load Balancing" title="Direct link to Load Balancing">​</a></h2>
<p>AI Gateway provides several load balancing algorithms:</p>
<ol>
<li>
<p><strong>Round-Robin</strong>
Round-robin is the simplest and most straightforward load balancing algorithm. It <strong>distributes incoming requests sequentially</strong> across all available targets in a circular order. Each target receives an <strong>equal distribution</strong> of the traffic, making this approach <strong>simple and predictable</strong>. This algorithm is ideal for scenarios where all targets have similar capacity and performance characteristics, as it ensures an even distribution of load across the entire upstream group.</p>
</li>
<li>
<p><strong>Weighted Round-Robin</strong>
Weighted round-robin builds on the basic round-robin algorithm by allowing you to assign different weights to each target. The algorithm distributes traffic proportionally based on these weights, giving more requests to targets with higher weights. This provides fine-grained control over load distribution, which is especially valuable when your targets have different capacities or processing capabilities.</p>
<ul>
<li>The algorithm enables <strong>distribution based on target weights</strong></li>
<li>Targets with <strong>higher weights receive more traffic</strong></li>
<li>This approach is particularly <strong>useful for heterogeneous targets</strong></li>
</ul>
</li>
<li>
<p><strong>Least Connections</strong>
The least connections algorithm implements an intelligent load distribution strategy that dynamically <strong>routes to the least busy target</strong> in the upstream group. This sophisticated approach continuously monitors and evaluates the load across all available targets in real-time. Unlike simpler algorithms, it maintains an accurate count of active connections to each target, using this information to make informed routing decisions that optimize resource utilization across the entire system.</p>
</li>
</ol>
<p>By tracking <strong>active connections</strong>, the system implements a dynamic decision-making process that goes beyond simple round-robin distribution. When a new request arrives, the algorithm evaluates the current connection count across all targets and automatically directs the request to the target with the lowest number of active connections. This real-time evaluation ensures that traffic is distributed optimally based on actual server load rather than predetermined patterns or weights.</p>
<p>This intelligent routing mechanism effectively <strong>prevents target overload</strong> by naturally distributing traffic to less busy servers. The approach is particularly valuable in scenarios with varying request processing times or where targets might experience different levels of load. The algorithm continuously adapts to changing conditions, taking into account both new connection requests and completed connections, making it especially effective for handling long-lived connections or scenarios where request processing times vary significantly between different requests. This adaptive nature ensures that no single target becomes overwhelmed while others remain underutilized.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="health-checking">Health Checking<a href="#health-checking" class="hash-link" aria-label="Direct link to Health Checking" title="Direct link to Health Checking">​</a></h2>
<p>Upstreams support two types of health checks that work in tandem to ensure optimal system reliability and performance:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="active-health-checks">Active Health Checks<a href="#active-health-checks" class="hash-link" aria-label="Direct link to Active Health Checks" title="Direct link to Active Health Checks">​</a></h3>
<p>Active health checking implements a <strong>proactive target testing</strong> strategy that continuously monitors the health of upstream targets. The system performs regular, scheduled health checks by sending test requests to each target at <strong>regular interval checks</strong>, allowing for early detection of potential issues before they impact user traffic. These checks are highly configurable and can be customized to match your specific service requirements.</p>
<p>The system implements <strong>automatic target removal</strong> when health checks fail, seamlessly removing problematic targets from the active pool without disrupting service. This automated response helps maintain system stability by preventing requests from being routed to malfunctioning targets. The removal process is governed by <strong>configurable thresholds</strong> that determine how many failed checks must occur before a target is considered unhealthy, as well as how many successful checks are required before it can rejoin the active pool. These thresholds can be fine-tuned based on your specific reliability requirements and tolerance for false positives.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="passive-health-checks">Passive Health Checks<a href="#passive-health-checks" class="hash-link" aria-label="Direct link to Passive Health Checks" title="Direct link to Passive Health Checks">​</a></h3>
<p>Passive health checking provides continuous monitoring by being <strong>based on request results</strong> from actual traffic patterns. Unlike active checks, passive monitoring analyzes real user requests to detect issues, providing insights into actual service behavior under real-world conditions. The system carefully <strong>tracks failures and successes</strong> of each request, building a comprehensive picture of target health based on actual performance data.</p>
<p>The passive system implements a <strong>gradual target recovery</strong> mechanism that carefully reintroduces previously failed targets back into the rotation. This careful approach prevents sudden traffic spikes to recovering targets and helps ensure stability during recovery phases. The system also features sophisticated <strong>automatic circuit breaking</strong> capabilities that can quickly respond to degraded performance or increased error rates. When certain error thresholds are exceeded, the circuit breaker trips, temporarily removing the affected target from the pool to prevent cascade failures and allow time for recovery.</p>
<p>The combination of both active and passive health checking creates a robust monitoring system that can quickly detect and respond to issues while maintaining optimal service availability. This dual approach ensures that problems are caught both through proactive testing and real-world usage patterns, providing comprehensive protection against service disruptions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="target-management">Target Management<a href="#target-management" class="hash-link" aria-label="Direct link to Target Management" title="Direct link to Target Management">​</a></h2>
<p>Targets represent the actual backend instances that handle incoming requests. The management of these targets is crucial for maintaining a reliable and efficient system. Let&#x27;s explore the key aspects of target management:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-target-properties">1. Target Properties<a href="#1-target-properties" class="hash-link" aria-label="Direct link to 1. Target Properties" title="Direct link to 1. Target Properties">​</a></h3>
<p>The foundation of target management lies in properly configuring essential target properties. Each target requires a specific <strong>host and port</strong> configuration that defines its network location and access point. These basic connection parameters ensure the gateway can establish and maintain reliable connections to the backend service.</p>
<p>The <strong>weight for load balancing</strong> property allows fine-grained control over traffic distribution. By assigning different weights to targets, administrators can influence how much traffic each target receives, enabling sophisticated load distribution strategies that account for varying server capacities and processing capabilities.</p>
<p>Target <strong>priority for failover</strong> settings determine the order in which targets are selected when failures occur. This hierarchical approach to failover ensures that traffic is redirected to the most appropriate backup targets when issues arise, maintaining service continuity while respecting operational preferences and infrastructure capabilities.</p>
<p>Comprehensive <strong>health check settings</strong> for each target enable customized monitoring approaches. These settings can be tailored to match the specific characteristics and requirements of each backend service, ensuring accurate health assessment and appropriate response to service degradation.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-target-states">2. Target States<a href="#2-target-states" class="hash-link" aria-label="Direct link to 2. Target States" title="Direct link to 2. Target States">​</a></h3>
<p>Target states represent the operational status of backend instances and determine how they participate in request handling. A target in the <strong>Healthy</strong> state actively receives traffic and participates fully in the load balancing rotation. These targets have passed all health checks and are operating within expected parameters, making them eligible to handle incoming requests.</p>
<p>When a target fails health checks or exhibits problematic behavior, it enters an <strong>Unhealthy</strong> state and is automatically removed from the pool. This state change prevents new requests from being routed to problematic targets while the underlying issues are investigated and resolved, protecting overall system stability.</p>
<p>The <strong>Draining</strong> state represents a graceful transition phase where a target is preparing to be removed from service. In this state, the target continues to process existing requests but doesn&#x27;t accept new ones, ensuring smooth maintenance operations and preventing request interruption. This controlled withdrawal process is essential for maintaining service quality during target removal or maintenance.</p>
<p>Targets can also be <strong>Disabled</strong> through manual intervention, allowing administrators to explicitly remove targets from the active pool. This state is useful for planned maintenance, testing, or when specific targets need to be temporarily excluded from service without affecting the overall system operation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices">​</a></h2>
<ol>
<li>
<p><strong>Load Balancing</strong></p>
<ul>
<li>Choose appropriate algorithms</li>
<li>Set proper target weights</li>
<li>Configure connection limits</li>
<li>Plan for scaling</li>
</ul>
</li>
<li>
<p><strong>Health Checks</strong></p>
<ul>
<li>Enable both check types</li>
<li>Set appropriate thresholds</li>
<li>Configure check intervals</li>
<li>Define recovery behavior</li>
</ul>
</li>
<li>
<p><strong>Target Management</strong></p>
<ul>
<li>Maintain adequate capacity</li>
<li>Plan for failover</li>
<li>Consider geographic distribution</li>
<li>Document target roles</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps">​</a></h2>
<ul>
<li><a href="/ai-gateway/concepts/services">Learn about Services</a></li>
<li><a href="/ai-gateway/concepts/rules">Configure Rules</a></li>
<li><a href="/ai-gateway/concepts/traffic-management">Understand Traffic Management</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/NeuralTrust/neuraltrust/blob/main/docs/ai-gateway/concepts/upstreams.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ai-gateway/concepts/services"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Services</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ai-gateway/concepts/rules"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Rules</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#upstream-structure" class="table-of-contents__link toc-highlight">Upstream Structure</a></li><li><a href="#load-balancing" class="table-of-contents__link toc-highlight">Load Balancing</a></li><li><a href="#health-checking" class="table-of-contents__link toc-highlight">Health Checking</a><ul><li><a href="#active-health-checks" class="table-of-contents__link toc-highlight">Active Health Checks</a></li><li><a href="#passive-health-checks" class="table-of-contents__link toc-highlight">Passive Health Checks</a></li></ul></li><li><a href="#target-management" class="table-of-contents__link toc-highlight">Target Management</a><ul><li><a href="#1-target-properties" class="table-of-contents__link toc-highlight">1. Target Properties</a></li><li><a href="#2-target-states" class="table-of-contents__link toc-highlight">2. Target States</a></li></ul></li><li><a href="#best-practices" class="table-of-contents__link toc-highlight">Best Practices</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>