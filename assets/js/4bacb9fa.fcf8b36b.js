"use strict";(self.webpackChunkneuraltrust_docs=self.webpackChunkneuraltrust_docs||[]).push([[4509],{10955:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"sdks/python-sdk/usage/functional-evaluation-set","title":"Functional EvaluationSet Generation","description":"This guide explains how to use the NeuralTrust SDK to create and evaluate TestSet for conversational AI applications.","source":"@site/docs/sdks/python-sdk/usage/functional-evaluation-set.md","sourceDirName":"sdks/python-sdk/usage","slug":"/sdks/python-sdk/usage/functional-evaluation-set","permalink":"/sdks/python-sdk/usage/functional-evaluation-set","draft":false,"unlisted":false,"editUrl":"https://github.com/NeuralTrust/neuraltrust/blob/main/docs/sdks/python-sdk/usage/functional-evaluation-set.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Examples","permalink":"/sdks/python-sdk/usage"},"next":{"title":"Tracing","permalink":"/sdks/python-sdk/usage/tracing"}}');var i=t(74848),a=t(28453);const r={sidebar_position:1},l="Functional EvaluationSet Generation",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Environment Setup",id:"environment-setup",level:2},{value:"Initialize NeuralTrust Client",id:"initialize-neuraltrust-client",level:2},{value:"Define Topics",id:"define-topics",level:2},{value:"Main Process",id:"main-process",level:2},{value:"Complete Script",id:"complete-script",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"functional-evaluationset-generation",children:"Functional EvaluationSet Generation"})}),"\n",(0,i.jsx)(n.p,{children:"This guide explains how to use the NeuralTrust SDK to create and evaluate TestSet for conversational AI applications."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"This script demonstrates how to:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Set up a knowledge base"}),"\n",(0,i.jsx)(n.li,{children:"Create an EvaluationSet"}),"\n",(0,i.jsx)(n.li,{children:"Generate adversarial test cases"}),"\n",(0,i.jsx)(n.li,{children:"Run evaluations"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"NeuralTrust API key"}),"\n",(0,i.jsx)(n.li,{children:"Upstash credentials (URL and token)"}),"\n",(0,i.jsx)(n.li,{children:"Python environment with required packages"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,i.jsx)(n.p,{children:"First, we need to set up our environment and import required packages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import os\nfrom dotenv import load_dotenv\nfrom neuraltrust import NeuralTrust\n\nload_dotenv()\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The script uses ",(0,i.jsx)(n.code,{children:"python-dotenv"})," to load environment variables from a ",(0,i.jsx)(n.code,{children:".env"})," file. Make sure your ",(0,i.jsx)(n.code,{children:".env"})," file contains:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-plaintext",children:"NEURALTRUST_API_KEY=your_api_key_here\nUPSTASH_URL=your_upstash_url\nUPSTASH_TOKEN=your_upstash_token\n"})}),"\n",(0,i.jsx)(n.h2,{id:"initialize-neuraltrust-client",children:"Initialize NeuralTrust Client"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'client = NeuralTrust(api_key=os.getenv("NEURALTRUST_API_KEY"))\n'})}),"\n",(0,i.jsx)(n.h2,{id:"define-topics",children:"Define Topics"}),"\n",(0,i.jsx)(n.p,{children:"Define the topics for which you want to generate TestSet:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'topics = [\n    "Paquetes Vacacionales y Reservas de Hoteles",\n]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"main-process",children:"Main Process"}),"\n",(0,i.jsx)(n.p,{children:"For each topic, the script:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Creates a knowledge base:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'knowledge_base = client.knowledge_base.create(\n    type="upstash",\n    credentials={\n        "UPSTASH_URL": os.getenv("UPSTASH_URL"),\n        "UPSTASH_TOKEN": os.getenv("UPSTASH_TOKEN"),\n    },\n    seed_topics=[topic],\n)\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Creates an EvaluationSet:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'eval_functional = client.evaluation_set.create(\n    name="Adversarial: " + topic,\n    description="Eres un agente de AirTrust encargado de responder preguntas a los clientes de AirTrust.",\n)\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Generates adversarial test cases:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'adversarial_testset = client.testset.create(\n    name=topic,\n    type="adversarial",\n    evaluation_set_id=eval_functional.id,\n    num_questions=8,\n    knowledge_base_id=knowledge_base.id,\n)\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Runs the evaluation:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"client.evaluation_set.run(id=eval_functional.id)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"complete-script",children:"Complete Script"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import os\nfrom dotenv import load_dotenv\nfrom neuraltrust import NeuralTrust\n\nload_dotenv()\n\nclient = NeuralTrust(api_key=os.getenv("NEURALTRUST_API_KEY"))\n\ntopics = [\n    "Paquetes Vacacionales y Reservas de Hoteles",\n]\n\nfor topic in topics:\n    try:\n        knowledge_base = client.knowledge_base.create(\n            type="upstash",\n            credentials={\n                "UPSTASH_URL": os.getenv("UPSTASH_URL"),\n                "UPSTASH_TOKEN": os.getenv("UPSTASH_TOKEN"),\n            },\n            seed_topics=[topic],\n        )\n\n        eval_functional = client.evaluation_set.create(\n            name="Adversarial: " + topic,\n            description="Eres un agente de AirTrust encargado de responder preguntas a los clientes de AirTrust.",\n        )\n\n        print("Generating adversarial testset for " + topic)\n        adversarial_testset = client.testset.create(\n            name=topic,\n            type="adversarial",\n            evaluation_set_id=eval_functional.id,\n            num_questions=8,\n            knowledge_base_id=knowledge_base.id,\n        )\n\n        client.evaluation_set.run(id=eval_functional.id)\n\n        print(f"Successfully processed {topic}")\n    except Exception:\n        import traceback\n        traceback.print_exc()\n\nprint("All topics have been processed.")\n'})}),"\n",(0,i.jsx)(n.p,{children:"This script can be used to automatically generate and evaluate TestSet for your conversational AI applications, helping ensure robust performance across different scenarios."})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var s=t(96540);const i={},a=s.createContext(i);function r(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);