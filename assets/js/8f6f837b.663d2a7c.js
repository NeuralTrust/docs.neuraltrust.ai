"use strict";(self.webpackChunkneuraltrust_docs=self.webpackChunkneuraltrust_docs||[]).push([[6097],{1960:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"trustgate/benchmark","title":"Benchmark","description":"The AI Gateway has been tested under high load conditions to ensure optimal performance. This guide explains how to run benchmarks and interpret the results.","source":"@site/docs/trustgate/benchmark.md","sourceDirName":"trustgate","slug":"/trustgate/benchmark","permalink":"/trustgate/benchmark","draft":false,"unlisted":false,"editUrl":"https://github.com/NeuralTrust/neuraltrust/blob/main/docs/trustgate/benchmark.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Monitoring","permalink":"/trustgate/monitoring"},"next":{"title":"TrustTest","permalink":"/trusttest"}}');var t=s(4848),i=s(8453);const c={sidebar_position:6},l="Benchmark",a={},d=[{value:"Running Benchmarks",id:"running-benchmarks",level:2},{value:"1. Automated Benchmark Script",id:"1-automated-benchmark-script",level:3},{value:"Configuration",id:"configuration",level:4},{value:"2. Manual Testing",id:"2-manual-testing",level:3},{value:"Performance Results",id:"performance-results",level:2},{value:"Key Metrics",id:"key-metrics",level:3},{value:"Performance Characteristics",id:"performance-characteristics",level:3},{value:"Notes",id:"notes",level:2},{value:"Best Practices",id:"best-practices",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"benchmark",children:"Benchmark"})}),"\n",(0,t.jsx)(n.p,{children:"The AI Gateway has been tested under high load conditions to ensure optimal performance. This guide explains how to run benchmarks and interpret the results."}),"\n",(0,t.jsx)(n.h2,{id:"running-benchmarks",children:"Running Benchmarks"}),"\n",(0,t.jsx)(n.p,{children:"There are two methods to benchmark the gateway:"}),"\n",(0,t.jsx)(n.h3,{id:"1-automated-benchmark-script",children:"1. Automated Benchmark Script"}),"\n",(0,t.jsx)(n.p,{children:"Use our automated benchmark script for comprehensive testing:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./scripts/benchmark.sh\n"})}),"\n",(0,t.jsx)(n.p,{children:"The script automatically:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Verifies dependencies"}),"\n",(0,t.jsx)(n.li,{children:"Creates a test gateway"}),"\n",(0,t.jsx)(n.li,{children:"Configures forwarding rules"}),"\n",(0,t.jsx)(n.li,{children:"Executes multiple benchmark scenarios"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Customize the benchmark using environment variables:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'export ADMIN_URL="http://localhost:8080/api/v1"  # Admin API endpoint\nexport PROXY_URL="http://localhost:8081"         # Proxy endpoint\nexport CONCURRENT_USERS=50                       # Number of concurrent users\nexport DURATION="30s"                           # Test duration\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-manual-testing",children:"2. Manual Testing"}),"\n",(0,t.jsxs)(n.p,{children:["For custom benchmarks, use ",(0,t.jsx)(n.a,{href:"https://github.com/rakyll/hey",children:"hey"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Install hey:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"go install github.com/rakyll/hey@latest\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Run custom benchmarks:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Set your gateway URL and API key\nexport GATEWAY_URL="http://localhost:8080"\nexport API_KEY="your-api-key"\n\n# Run benchmark\nhey -n 100000 -c 50 \\\n    -H "Authorization: Bearer $API_KEY" \\\n    -H "Content-Type: application/json" \\\n    -m POST \\\n    -d \'{"model": "gpt-3.5-turbo", "messages": [{"role": "user", "content": "Hi"}]}\' \\\n    "$GATEWAY_URL/v1/chat/completions"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"performance-results",children:"Performance Results"}),"\n",(0,t.jsx)(n.p,{children:"Recent benchmark results show impressive performance:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Summary:\n  Total:        3.9210 secs\n  Slowest:      0.1347 secs\n  Fastest:      0.0004 secs\n  Average:      0.0078 secs\n  Requests/sec: 25503.4763\n\n  Total data:   4900000 bytes\n  Size/request: 49 bytes\n\nLatency distribution:\n  10% in 0.0047 secs\n  25% in 0.0059 secs\n  50% in 0.0073 secs\n  75% in 0.0090 secs\n  90% in 0.0109 secs\n  95% in 0.0123 secs\n  99% in 0.0158 secs\n"})}),"\n",(0,t.jsx)(n.h3,{id:"key-metrics",children:"Key Metrics"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Metric"}),(0,t.jsx)(n.th,{children:"Value"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Throughput"}),(0,t.jsx)(n.td,{children:"25,500 req/s"}),(0,t.jsx)(n.td,{children:"Requests processed per second"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Avg Latency"}),(0,t.jsx)(n.td,{children:"7.8ms"}),(0,t.jsx)(n.td,{children:"Average response time"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"P99 Latency"}),(0,t.jsx)(n.td,{children:"15.8ms"}),(0,t.jsx)(n.td,{children:"99th percentile response time"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Success Rate"}),(0,t.jsx)(n.td,{children:"100%"}),(0,t.jsx)(n.td,{children:"Percentage of successful requests"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"performance-characteristics",children:"Performance Characteristics"}),"\n",(0,t.jsx)(n.p,{children:"The gateway demonstrates:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Low Latency"}),": 90% of requests complete under 11ms"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"High Throughput"}),": Exceeds 25k requests per second"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Stability"}),": Minimal performance variance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Reliability"}),": No failed requests during testing"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Results were obtained in controlled conditions"}),"\n",(0,t.jsxs)(n.li,{children:["Actual performance may vary based on:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Network conditions"}),"\n",(0,t.jsx)(n.li,{children:"Hardware specifications"}),"\n",(0,t.jsx)(n.li,{children:"Specific use cases"}),"\n",(0,t.jsx)(n.li,{children:"Load patterns"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Environment Setup"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use production-grade hardware"}),"\n",(0,t.jsx)(n.li,{children:"Ensure sufficient network bandwidth"}),"\n",(0,t.jsx)(n.li,{children:"Configure appropriate system limits"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Test Configuration"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Start with lower concurrency"}),"\n",(0,t.jsx)(n.li,{children:"Gradually increase load"}),"\n",(0,t.jsx)(n.li,{children:"Monitor system resources"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Results Analysis"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Focus on P95 and P99 latencies"}),"\n",(0,t.jsx)(n.li,{children:"Monitor error rates"}),"\n",(0,t.jsx)(n.li,{children:"Check resource utilization"}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>l});var r=s(6540);const t={},i=r.createContext(t);function c(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);