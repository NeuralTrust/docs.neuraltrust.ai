"use strict";(self.webpackChunkneuraltrust_docs=self.webpackChunkneuraltrust_docs||[]).push([[3566],{6916:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"trustgate/plugins/request-size-limiter","title":"Request Size Limiter","description":"Technical Overview","source":"@site/docs/trustgate/plugins/request-size-limiter.md","sourceDirName":"trustgate/plugins","slug":"/trustgate/plugins/request-size-limiter","permalink":"/trustgate/plugins/request-size-limiter","draft":false,"unlisted":false,"editUrl":"https://github.com/NeuralTrust/neuraltrust/blob/main/docs/trustgate/plugins/request-size-limiter.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"Request Size Limiter"},"sidebar":"tutorialSidebar","previous":{"title":"Code Sanitation","permalink":"/trustgate/plugins/code-sanitation"},"next":{"title":"Monitoring","permalink":"/trustgate/monitoring"}}');var s=i(4848),l=i(8453);const t={sidebar_position:10,title:"Request Size Limiter"},d="Request Size Limiter",c={},o=[{value:"Technical Overview",id:"technical-overview",level:2},{value:"Core Components",id:"core-components",level:3},{value:"Size Control Mechanisms",id:"size-control-mechanisms",level:2},{value:"Header Control",id:"header-control",level:3},{value:"Body Control",id:"body-control",level:3},{value:"URL Control",id:"url-control",level:3},{value:"Processing Pipeline",id:"processing-pipeline",level:2},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Memory Management",id:"memory-management",level:3},{value:"Processing Efficiency",id:"processing-efficiency",level:3},{value:"Connection Handling",id:"connection-handling",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Size Violations",id:"size-violations",level:3},{value:"Protocol Errors",id:"protocol-errors",level:3},{value:"Resource Errors",id:"resource-errors",level:3},{value:"Features",id:"features",level:2},{value:"Size Limits",id:"size-limits",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Configuration Parameters",id:"configuration-parameters",level:3},{value:"Usage Example",id:"usage-example",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"request-size-limiter",children:"Request Size Limiter"})}),"\n",(0,s.jsx)(n.h2,{id:"technical-overview",children:"Technical Overview"}),"\n",(0,s.jsx)(n.p,{children:"The Request Size Limiter plugin provides precise control over HTTP request sizes through multi-component analysis and enforcement. It implements efficient size checking without buffering entire requests."}),"\n",(0,s.jsx)(n.h3,{id:"core-components",children:"Core Components"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Size Analysis Engine"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Streaming size calculation"}),"\n",(0,s.jsx)(n.li,{children:"Header count tracking"}),"\n",(0,s.jsx)(n.li,{children:"Content-Length validation"}),"\n",(0,s.jsx)(n.li,{children:"Transfer-Encoding handling"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Limit Enforcement"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Early request termination"}),"\n",(0,s.jsx)(n.li,{children:"Partial request handling"}),"\n",(0,s.jsx)(n.li,{children:"Chunked transfer support"}),"\n",(0,s.jsx)(n.li,{children:"Multi-part form handling"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Resource Management"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Memory usage control"}),"\n",(0,s.jsx)(n.li,{children:"Buffer management"}),"\n",(0,s.jsx)(n.li,{children:"Connection handling"}),"\n",(0,s.jsx)(n.li,{children:"Timeout enforcement"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"size-control-mechanisms",children:"Size Control Mechanisms"}),"\n",(0,s.jsx)(n.h3,{id:"header-control",children:"Header Control"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Size Calculation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Individual header sizes"}),"\n",(0,s.jsx)(n.li,{children:"Total header size"}),"\n",(0,s.jsx)(n.li,{children:"Header count tracking"}),"\n",(0,s.jsx)(n.li,{children:"Name-value pair analysis"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Limit Enforcement"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Pre-parse rejection"}),"\n",(0,s.jsx)(n.li,{children:"Progressive checking"}),"\n",(0,s.jsx)(n.li,{children:"Early termination"}),"\n",(0,s.jsx)(n.li,{children:"Buffer management"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"body-control",children:"Body Control"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Size Tracking"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Streaming measurement"}),"\n",(0,s.jsx)(n.li,{children:"Chunk size validation"}),"\n",(0,s.jsx)(n.li,{children:"Content-Length verification"}),"\n",(0,s.jsx)(n.li,{children:"Multi-part boundaries"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Transfer Handling"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Chunked encoding"}),"\n",(0,s.jsx)(n.li,{children:"Content-Length"}),"\n",(0,s.jsx)(n.li,{children:"Multi-part forms"}),"\n",(0,s.jsx)(n.li,{children:"Raw body data"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"url-control",children:"URL Control"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Length Calculation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Path length"}),"\n",(0,s.jsx)(n.li,{children:"Query string size"}),"\n",(0,s.jsx)(n.li,{children:"Fragment size"}),"\n",(0,s.jsx)(n.li,{children:"Total URL length"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"processing-pipeline",children:"Processing Pipeline"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Request Reception"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Initial size check"}),"\n",(0,s.jsx)(n.li,{children:"Header processing"}),"\n",(0,s.jsx)(n.li,{children:"Body streaming"}),"\n",(0,s.jsx)(n.li,{children:"Resource allocation"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Size Validation"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Progressive checking"}),"\n",(0,s.jsx)(n.li,{children:"Limit comparison"}),"\n",(0,s.jsx)(n.li,{children:"Resource monitoring"}),"\n",(0,s.jsx)(n.li,{children:"Error detection"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Limit Enforcement"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Request termination"}),"\n",(0,s.jsx)(n.li,{children:"Error response"}),"\n",(0,s.jsx)(n.li,{children:"Resource cleanup"}),"\n",(0,s.jsx)(n.li,{children:"Logging"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"memory-management",children:"Memory Management"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"No complete buffering"}),"\n",(0,s.jsx)(n.li,{children:"Streaming processing"}),"\n",(0,s.jsx)(n.li,{children:"Buffer pooling"}),"\n",(0,s.jsx)(n.li,{children:"Resource limits"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"processing-efficiency",children:"Processing Efficiency"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Early rejection"}),"\n",(0,s.jsx)(n.li,{children:"Progressive checking"}),"\n",(0,s.jsx)(n.li,{children:"Minimal copying"}),"\n",(0,s.jsx)(n.li,{children:"Zero allocations"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"connection-handling",children:"Connection Handling"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Keep-alive support"}),"\n",(0,s.jsx)(n.li,{children:"Connection termination"}),"\n",(0,s.jsx)(n.li,{children:"Timeout management"}),"\n",(0,s.jsx)(n.li,{children:"Resource cleanup"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.h3,{id:"size-violations",children:"Size Violations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Header size exceeded"}),"\n",(0,s.jsx)(n.li,{children:"Body size exceeded"}),"\n",(0,s.jsx)(n.li,{children:"URL length exceeded"}),"\n",(0,s.jsx)(n.li,{children:"Header count exceeded"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"protocol-errors",children:"Protocol Errors"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Invalid Content-Length"}),"\n",(0,s.jsx)(n.li,{children:"Malformed chunks"}),"\n",(0,s.jsx)(n.li,{children:"Invalid headers"}),"\n",(0,s.jsx)(n.li,{children:"Protocol violations"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"resource-errors",children:"Resource Errors"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Memory limits"}),"\n",(0,s.jsx)(n.li,{children:"Connection timeouts"}),"\n",(0,s.jsx)(n.li,{children:"System resources"}),"\n",(0,s.jsx)(n.li,{children:"Network errors"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Configurable size limits"}),"\n",(0,s.jsx)(n.li,{children:"Multiple request part checking"}),"\n",(0,s.jsx)(n.li,{children:"Customizable error responses"}),"\n",(0,s.jsx)(n.li,{children:"Byte-level precision"}),"\n",(0,s.jsx)(n.li,{children:"Header count limiting"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"size-limits",children:"Size Limits"}),"\n",(0,s.jsx)(n.p,{children:"The plugin can limit:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Request Part"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Default"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Headers"}),(0,s.jsx)(n.td,{children:"Total headers size"}),(0,s.jsx)(n.td,{children:"8KB"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Body"}),(0,s.jsx)(n.td,{children:"Request body size"}),(0,s.jsx)(n.td,{children:"1MB"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"URL"}),(0,s.jsx)(n.td,{children:"URL length"}),(0,s.jsx)(n.td,{children:"2KB"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Header Count"}),(0,s.jsx)(n.td,{children:"Number of headers"}),(0,s.jsx)(n.td,{children:"100"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "name": "request_size_limiter",\n  "enabled": true,\n  "stage": "pre_request",\n  "settings": {\n    "max_header_size": 8192,\n    "max_body_size": 1048576,\n    "max_url_length": 2048,\n    "max_header_count": 100,\n    "error_message": "Request size exceeds limit"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"configuration-parameters",children:"Configuration Parameters"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Default"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"max_header_size"}),(0,s.jsx)(n.td,{children:"number"}),(0,s.jsx)(n.td,{children:"Maximum headers size in bytes"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"8192"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"max_body_size"}),(0,s.jsx)(n.td,{children:"number"}),(0,s.jsx)(n.td,{children:"Maximum body size in bytes"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"1048576"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"max_url_length"}),(0,s.jsx)(n.td,{children:"number"}),(0,s.jsx)(n.td,{children:"Maximum URL length in bytes"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"2048"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"max_header_count"}),(0,s.jsx)(n.td,{children:"number"}),(0,s.jsx)(n.td,{children:"Maximum number of headers"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"100"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"error_message"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Custom error message"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:'"Request size exceeds limit"'})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8080/api/v1/gateways" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "name": "Size Limited Gateway",\n    "subdomain": "size-limited",\n    "required_plugins": [\n      {\n        "name": "request_size_limiter",\n        "enabled": true,\n        "stage": "pre_request",\n        "settings": {\n          "max_header_size": 8192,\n          "max_body_size": 1048576,\n          "max_url_length": 2048,\n          "max_header_count": 100\n        }\n      }\n    ]\n  }\'\n'})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Size Limit Selection"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Set limits based on requirements"}),"\n",(0,s.jsx)(n.li,{children:"Consider application needs"}),"\n",(0,s.jsx)(n.li,{children:"Monitor rejection rates"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Header Count Limits"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Set reasonable header limits"}),"\n",(0,s.jsx)(n.li,{children:"Account for standard headers"}),"\n",(0,s.jsx)(n.li,{children:"Consider proxy headers"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Error Handling"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use clear error messages"}),"\n",(0,s.jsx)(n.li,{children:"Log rejected requests"}),"\n",(0,s.jsx)(n.li,{children:"Monitor trends"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Performance Tuning"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Adjust limits based on usage"}),"\n",(0,s.jsx)(n.li,{children:"Monitor resource usage"}),"\n",(0,s.jsx)(n.li,{children:"Balance security vs usability"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Constant-time size checking"}),"\n",(0,s.jsx)(n.li,{children:"Minimal memory overhead"}),"\n",(0,s.jsx)(n.li,{children:"Early request rejection"}),"\n",(0,s.jsx)(n.li,{children:"Efficient header counting"}),"\n",(0,s.jsx)(n.li,{children:"No request buffering needed"}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>d});var r=i(6540);const s={},l=r.createContext(s);function t(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);