"use strict";(self.webpackChunkneuraltrust_docs=self.webpackChunkneuraltrust_docs||[]).push([[5108],{6248:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>t,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"ai-gateway/concepts/plugin-system","title":"Plugin System","description":"The AI Gateway uses a flexible plugin system to extend and customize functionality.","source":"@site/docs/ai-gateway/concepts/plugin-system.md","sourceDirName":"ai-gateway/concepts","slug":"/ai-gateway/concepts/plugin-system","permalink":"/neuraltrust/ai-gateway/concepts/plugin-system","draft":false,"unlisted":false,"editUrl":"https://github.com/NeuralTrust/neuraltrust/blob/main/docs/ai-gateway/concepts/plugin-system.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Forwarding Rules","permalink":"/neuraltrust/ai-gateway/concepts/forwarding-rules"},"next":{"title":"Traffic Management","permalink":"/neuraltrust/ai-gateway/concepts/traffic-management"}}');var r=i(4848),s=i(8453);const t={sidebar_position:2},a="Plugin System",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Plugin Architecture",id:"plugin-architecture",level:2},{value:"Execution Stages",id:"execution-stages",level:3},{value:"Execution Modes",id:"execution-modes",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Basic Plugin Setup",id:"basic-plugin-setup",level:3},{value:"Parallel Execution Setup",id:"parallel-execution-setup",level:3},{value:"Execution Flow",id:"execution-flow",level:2},{value:"Plugin Types",id:"plugin-types",level:2},{value:"Sequential Plugins (parallel: false)",id:"sequential-plugins-parallel-false",level:3},{value:"Parallel Plugins (parallel: true)",id:"parallel-plugins-parallel-true",level:3},{value:"Built-in Plugins",id:"built-in-plugins",level:2},{value:"Creating Custom Plugins",id:"creating-custom-plugins",level:2},{value:"Best Practices",id:"best-practices",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"plugin-system",children:"Plugin System"})}),"\n",(0,r.jsx)(n.p,{children:"The AI Gateway uses a flexible plugin system to extend and customize functionality."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Plugins can:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Modify requests and responses"}),"\n",(0,r.jsx)(n.li,{children:"Implement security controls"}),"\n",(0,r.jsx)(n.li,{children:"Add monitoring capabilities"}),"\n",(0,r.jsx)(n.li,{children:"Integrate with external services"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"plugin-architecture",children:"Plugin Architecture"}),"\n",(0,r.jsx)(n.h3,{id:"execution-stages",children:"Execution Stages"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pre-Request"}),": Before the request reaches the LLM"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Post-Request"}),": After receiving the LLM response"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Error"}),": Handles error conditions"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"execution-modes",children:"Execution Modes"}),"\n",(0,r.jsx)(n.p,{children:"The plugin system supports both sequential and parallel execution:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Priority Levels"}),": Plugins are executed in order of their priority (lower numbers run first)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parallel Flag"}),": Plugins with the same priority can run in parallel if configured to do so"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"basic-plugin-setup",children:"Basic Plugin Setup"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "plugins": [\n    {\n      "name": "rate_limiter",\n      "enabled": true,\n      "stage": "pre_request",\n      "config": {\n        "limit": 100,\n        "window": "1m"\n      }\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"parallel-execution-setup",children:"Parallel Execution Setup"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"plugin_chain": [\n    {\n        "name": "rate_limiter",\n        "enabled": true,\n        "parallel": false,  // Must run sequentially\n        "priority": 1      // Runs first\n    },\n    {\n        "name": "external_validator",\n        "enabled": true,\n        "parallel": true,   // Can run in parallel\n        "priority": 2      // Runs after rate_limiter\n    },\n    {\n        "name": "content_validator",\n        "enabled": true,\n        "parallel": true,   // Can run in parallel\n        "priority": 2      // Runs alongside external_validator\n    }\n]\n'})}),"\n",(0,r.jsx)(n.h2,{id:"execution-flow",children:"Execution Flow"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Plugins are grouped by priority"}),"\n",(0,r.jsx)(n.li,{children:"Each priority group is executed in order (lowest to highest)"}),"\n",(0,r.jsxs)(n.li,{children:["Within each priority group:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"If there's only one plugin, it runs sequentially"}),"\n",(0,r.jsx)(n.li,{children:"If there are multiple plugins and they support parallel execution, they run concurrently"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"plugin-types",children:"Plugin Types"}),"\n",(0,r.jsx)(n.h3,{id:"sequential-plugins-parallel-false",children:"Sequential Plugins (parallel: false)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Need to maintain state"}),"\n",(0,r.jsx)(n.li,{children:"Order-dependent operations"}),"\n",(0,r.jsxs)(n.li,{children:["Examples:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Rate Limiter"}),"\n",(0,r.jsx)(n.li,{children:"Authentication"}),"\n",(0,r.jsx)(n.li,{children:"Session Management"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"parallel-plugins-parallel-true",children:"Parallel Plugins (parallel: true)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Stateless operations"}),"\n",(0,r.jsx)(n.li,{children:"Order-independent"}),"\n",(0,r.jsxs)(n.li,{children:["Examples:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Content Validators"}),"\n",(0,r.jsx)(n.li,{children:"External API Calls"}),"\n",(0,r.jsx)(n.li,{children:"Logging/Monitoring"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"built-in-plugins",children:"Built-in Plugins"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Rate Limiter"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "rate_limiter",\n  "enabled": true,\n  "priority": 1,\n  "parallel": false,\n  "config": {\n    "limit": 100,\n    "window": "1m"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Content Filter"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "content_filter",\n  "enabled": true,\n  "priority": 2,\n  "parallel": true,\n  "config": {\n    "banned_patterns": ["pattern1", "pattern2"],\n    "action": "reject"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"creating-custom-plugins",children:"Creating Custom Plugins"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"type Plugin interface {\n    Name() string\n    Stage() string\n    Priority() int\n    SupportsParallel() bool\n    Execute(ctx context.Context, data *PluginData) error\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Priority Assignment"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Lower numbers for critical plugins"}),"\n",(0,r.jsx)(n.li,{children:"Group related plugins with same priority"}),"\n",(0,r.jsx)(n.li,{children:"Consider dependencies when setting priorities"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parallel Execution"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use for independent operations"}),"\n",(0,r.jsx)(n.li,{children:"Ensure thread safety"}),"\n",(0,r.jsx)(n.li,{children:"Monitor performance impact"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error Handling"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Implement proper fallbacks"}),"\n",(0,r.jsx)(n.li,{children:"Log errors appropriately"}),"\n",(0,r.jsx)(n.li,{children:"Consider retry strategies"}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var l=i(6540);const r={},s=l.createContext(r);function t(e){const n=l.useContext(s);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);