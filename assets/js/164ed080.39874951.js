"use strict";(self.webpackChunkneuraltrust_docs=self.webpackChunkneuraltrust_docs||[]).push([[7991],{62676:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"trustgate/getting-started/step-by-step/rate-limiting","title":"Rate Limiting","description":"TrustGate provides two types of rate limiting: request-based and token-based rate limiting. These help protect your AI models from overuse and ensure fair resource distribution.","source":"@site/docs/trustgate/getting-started/step-by-step/rate-limiting.md","sourceDirName":"trustgate/getting-started/step-by-step","slug":"/trustgate/getting-started/step-by-step/rate-limiting","permalink":"/trustgate/getting-started/step-by-step/rate-limiting","draft":false,"unlisted":false,"editUrl":"https://github.com/NeuralTrust/neuraltrust/blob/main/docs/trustgate/getting-started/step-by-step/rate-limiting.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"Rate Limiting"},"sidebar":"tutorialSidebar","previous":{"title":"Load Balancing","permalink":"/trustgate/getting-started/step-by-step/load-balancing"},"next":{"title":"Key Concepts","permalink":"/trustgate/concepts"}}');var s=i(74848),r=i(28453);const l={sidebar_position:8,title:"Rate Limiting"},a="Rate Limiting",d={},o=[{value:"Request-Based Rate Limiting",id:"request-based-rate-limiting",level:2},{value:"Configuration Options",id:"configuration-options",level:3},{value:"Token-Based Rate Limiting",id:"token-based-rate-limiting",level:2},{value:"Token Limiter Settings",id:"token-limiter-settings",level:3},{value:"Monitoring Rate Limits",id:"monitoring-rate-limits",level:2},{value:"Request-Based Headers",id:"request-based-headers",level:3},{value:"Token-Based Headers",id:"token-based-headers",level:3},{value:"Rate Limit Response",id:"rate-limit-response",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"rate-limiting",children:"Rate Limiting"})}),"\n",(0,s.jsx)(n.p,{children:"TrustGate provides two types of rate limiting: request-based and token-based rate limiting. These help protect your AI models from overuse and ensure fair resource distribution."}),"\n",(0,s.jsx)(n.h2,{id:"request-based-rate-limiting",children:"Request-Based Rate Limiting"}),"\n",(0,s.jsx)(n.p,{children:"Configure the rate limiter plugin with multiple limit types:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/api/v1/gateways/{gateway-id} \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "required_plugins": [\n      {\n        "name": "rate_limiter",\n        "enabled": true,\n        "stage": "pre_request",\n        "priority": 1,\n        "settings": {\n          "limits": {\n            "global": {\n              "limit": 15,\n              "window": "1m"\n            },\n            "per_ip": {\n              "limit": 5,\n              "window": "1m"\n            },\n            "per_user": {\n              "limit": 5,\n              "window": "1m"\n            }\n          },\n          "actions": {\n            "type": "reject",\n            "retry_after": "60"\n          }\n        }\n      }\n    ]\n  }\'\n'})}),"\n",(0,s.jsx)(n.h3,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Limit Types"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"global"}),": Total requests across all users"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"per_ip"}),": Requests from each IP address"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"per_user"}),": Requests per API key"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Window Settings"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use time units: ",(0,s.jsx)(n.code,{children:"s"})," (seconds), ",(0,s.jsx)(n.code,{children:"m"})," (minutes), ",(0,s.jsx)(n.code,{children:"h"})," (hours)"]}),"\n",(0,s.jsxs)(n.li,{children:["Example: ",(0,s.jsx)(n.code,{children:'"window": "1m"'})," for one-minute window"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Actions"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"reject"}),": Block requests when limit exceeded"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"retry_after"}),": Time in seconds before retrying"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"token-based-rate-limiting",children:"Token-Based Rate Limiting"}),"\n",(0,s.jsx)(n.p,{children:"For AI model requests, use token-based rate limiting to control token consumption:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/api/v1/gateways/{gateway-id} \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "required_plugins": [\n      {\n        "name": "token_rate_limiter",\n        "enabled": true,\n        "settings": {\n          "tokens_per_request": 20,\n          "tokens_per_minute": 100,\n          "bucket_size": 1000,\n          "requests_per_minute": 60\n        }\n      }\n    ]\n  }\'\n'})}),"\n",(0,s.jsx)(n.h3,{id:"token-limiter-settings",children:"Token Limiter Settings"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"tokens_per_request"}),": Maximum tokens per single request"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"tokens_per_minute"}),": Total tokens allowed per minute"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"bucket_size"}),": Maximum token burst capacity"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"requests_per_minute"}),": Maximum number of requests per minute"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"monitoring-rate-limits",children:"Monitoring Rate Limits"}),"\n",(0,s.jsx)(n.p,{children:"The gateway includes rate limit information in response headers:"}),"\n",(0,s.jsx)(n.h3,{id:"request-based-headers",children:"Request-Based Headers"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"X-RateLimit-Limit-Minute: 60\nX-RateLimit-Remaining-Minute: 59\nX-RateLimit-Reset-Minute: 52\n"})}),"\n",(0,s.jsx)(n.h3,{id:"token-based-headers",children:"Token-Based Headers"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"X-RateLimit-Limit-Tokens: 1000\nX-RateLimit-Remaining-Tokens: 900\nX-RateLimit-Reset-Tokens: 45\nX-Tokens-Consumed: 100\n"})}),"\n",(0,s.jsx)(n.h2,{id:"rate-limit-response",children:"Rate Limit Response"}),"\n",(0,s.jsx)(n.p,{children:"When a rate limit is exceeded, you'll receive a 429 (Too Many Requests) response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Rate limit exceeded",\n  "retry_after": 60\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Layered Rate Limiting"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use both request and token limits for AI endpoints"}),"\n",(0,s.jsx)(n.li,{children:"Configure global, IP, and user-based limits"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Window Sizing"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use shorter windows (1m) for precise control"}),"\n",(0,s.jsx)(n.li,{children:"Use longer windows (1h) for overall quotas"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Monitoring"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Watch rate limit headers to track usage"}),"\n",(0,s.jsx)(n.li,{children:"Implement client-side rate limiting"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(n.p,{children:"After configuring rate limiting:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/trustgate/getting-started/step-by-step/load-balancing",children:"Configure Load Balancing"})," for high availability"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var t=i(96540);const s={},r=t.createContext(s);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);