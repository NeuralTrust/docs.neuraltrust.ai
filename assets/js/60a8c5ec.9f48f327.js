"use strict";(self.webpackChunkneuraltrust_docs=self.webpackChunkneuraltrust_docs||[]).push([[3126],{6835:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"trustgate/plugins/prompt-guard/bedrock-guardrail","title":"AWS Bedrock Guardrail","description":"Overview","source":"@site/docs/trustgate/plugins/prompt-guard/bedrock-guardrail.md","sourceDirName":"trustgate/plugins/prompt-guard","slug":"/trustgate/plugins/prompt-guard/bedrock-guardrail","permalink":"/trustgate/plugins/prompt-guard/bedrock-guardrail","draft":false,"unlisted":false,"editUrl":"https://github.com/NeuralTrust/neuraltrust/blob/main/docs/trustgate/plugins/prompt-guard/bedrock-guardrail.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Prompt Guard","permalink":"/trustgate/plugins/prompt-guard"},"next":{"title":"API","permalink":"/trustgate/api"}}');var t=i(74848),s=i(28453);const o={sidebar_position:1},a="AWS Bedrock Guardrail",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Configuration Examples",id:"configuration-examples",level:2},{value:"Basic Configuration",id:"basic-configuration",level:3},{value:"Security-Focused Configuration",id:"security-focused-configuration",level:3},{value:"Example Use Cases",id:"example-use-cases",level:2},{value:"1. Content Moderation Gateway",id:"1-content-moderation-gateway",level:3},{value:"2. Topic Policy Protection",id:"2-topic-policy-protection",level:3},{value:"3. Sensitive Information Protection",id:"3-sensitive-information-protection",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Guardrail Configuration",id:"1-guardrail-configuration",level:3},{value:"2. Error Handling",id:"2-error-handling",level:3},{value:"3. Performance Optimization",id:"3-performance-optimization",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"aws-bedrock-guardrail",children:"AWS Bedrock Guardrail"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:"AWS Bedrock Guardrail"})," plugin is a robust content filtering system that leverages Amazon Bedrock's guardrail capabilities to protect your AI gateway. It provides comprehensive content moderation through Amazon's pre-trained models and customizable guardrails, ensuring that content passing through your gateway adheres to specified policies and guidelines."]}),"\n",(0,t.jsx)(n.p,{children:"The plugin integrates seamlessly with AWS Bedrock's guardrail system, which offers three primary types of protection:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Topic Policy"}),": Controls allowed and disallowed topics"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Content Policy"}),": Filters potentially harmful or inappropriate content"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Sensitive Information Policy"}),": Detects and protects against exposure of sensitive data"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Each policy type can be configured through AWS Bedrock's guardrail configuration, making this plugin highly flexible and adaptable to various use cases and security requirements."}),"\n",(0,t.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Topic-based Filtering"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Block specific topics or subject matters"}),"\n",(0,t.jsx)(n.li,{children:"Customizable topic policies"}),"\n",(0,t.jsx)(n.li,{children:"Fine-grained control over allowed content"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Content Moderation"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Detection of harmful content"}),"\n",(0,t.jsx)(n.li,{children:"Customizable content policies"}),"\n",(0,t.jsx)(n.li,{children:"Multiple filter types for different content categories"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"PII Protection"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Detection of sensitive information"}),"\n",(0,t.jsx)(n.li,{children:"Protection against data leakage"}),"\n",(0,t.jsx)(n.li,{children:"Customizable PII entity types"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Action Configuration"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Customizable block messages"}),"\n",(0,t.jsx)(n.li,{children:"Detailed error reporting"}),"\n",(0,t.jsx)(n.li,{children:"Comprehensive logging"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"configuration-examples",children:"Configuration Examples"}),"\n",(0,t.jsx)(n.h3,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,t.jsx)(n.p,{children:"The basic configuration provides essential content filtering with a specified guardrail:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "settings": {\n        "guardrail_id": "<your-guardrail-id>",\n        "version": "1",\n        "actions": {\n            "message": "%s"\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Key components of the basic configuration:"}),"\n",(0,t.jsx)("h4",{align:"center",children:(0,t.jsx)("strong",{children:(0,t.jsx)("u",{children:"Configuration Parameters"})})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Required"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"guardrail_id"}),(0,t.jsx)(n.td,{children:"AWS Bedrock Guardrail identifier"}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"version"}),(0,t.jsx)(n.td,{children:'Guardrail version (defaults to "1")'}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"actions.message"}),(0,t.jsx)(n.td,{children:"Custom message template for blocked content"}),(0,t.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"security-focused-configuration",children:"Security-Focused Configuration"}),"\n",(0,t.jsx)(n.p,{children:"For environments requiring strict security controls:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "settings": {\n        "guardrail_id": "<your-guardrail-id>",\n        "version": "2",\n        "actions": {\n            "message": "Security violation detected: %s. This incident has been logged."\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"example-use-cases",children:"Example Use Cases"}),"\n",(0,t.jsx)(n.h3,{id:"1-content-moderation-gateway",children:"1. Content Moderation Gateway"}),"\n",(0,t.jsx)(n.p,{children:"Create a gateway that moderates content using AWS Bedrock's guardrails:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8080/api/v1/gateways" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "name": "Bedrock Guardrail Gateway",\n    "subdomain": "bedrock-guard",\n    "required_plugins": [\n        {\n            "name": "bedrock_guardrail",\n            "enabled": true,\n            "stage": "pre_request",\n            "priority": 1,\n            "settings": {\n                "guardrail_id": "<your-guardrail-id>",\n                "version": "1",\n                "actions": {\n                    "message": "%s"\n                }\n            }\n        }\n    ]\n}\'\n'})}),"\n",(0,t.jsx)(n.p,{children:"Test with safe content:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8081/post" \\\n    -H "Host: bedrock-guard.example.com" \\\n    -H "X-API-Key: ${API_KEY}" \\\n    -H "Content-Type: text/plain" \\\n    -d "The latest deployment includes performance improvements and bug fixes."\n\n# Expected Response: 200 OK\n'})}),"\n",(0,t.jsx)(n.p,{children:"Test with policy violation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8081/post" \\\n    -H "Host: bedrock-guard.example.com" \\\n    -H "X-API-Key: ${API_KEY}" \\\n    -H "Content-Type: text/plain" \\\n    -d "I dont like obama"\n\n# Expected Response: 403 Forbidden\n# Message: "Content blocked: Potentially harmful content detected"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-topic-policy-protection",children:"2. Topic Policy Protection"}),"\n",(0,t.jsx)(n.p,{children:"The topic policy feature allows you to control which subjects or topics are allowed or denied in the content. When a topic is blocked, the plugin will return a specific error message indicating which topic violated the policy."}),"\n",(0,t.jsx)(n.p,{children:"Example configuration focusing on topic policies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8080/api/v1/gateways" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "name": "Topic Protection Gateway",\n    "subdomain": "topic-protection",\n    "required_plugins": [\n        {\n            "name": "bedrock_guardrail",\n            "enabled": true,\n            "stage": "pre_request",\n            "priority": 1,\n            "settings": {\n                "guardrail_id": "<your-guardrail-id>",\n                "version": "1",\n                "actions": {\n                    "message": "Topic policy violation: %s"\n                }\n            }\n        }\n    ]\n}\'\n'})}),"\n",(0,t.jsx)(n.h3,{id:"3-sensitive-information-protection",children:"3. Sensitive Information Protection"}),"\n",(0,t.jsx)(n.p,{children:"The plugin can detect and block content containing sensitive information such as PII (Personally Identifiable Information):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8080/api/v1/gateways" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "name": "PII Protection Gateway",\n    "subdomain": "pii-protection",\n    "required_plugins": [\n        {\n            "name": "bedrock_guardrail",\n            "enabled": true,\n            "stage": "pre_request",\n            "priority": 1,\n            "settings": {\n                "guardrail_id": "<your-guardrail-id>",\n                "version": "1",\n                "actions": {\n                    "message": "Sensitive information detected: %s"\n                }\n            }\n        }\n    ]\n}\'\n'})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"1-guardrail-configuration",children:"1. Guardrail Configuration"}),"\n",(0,t.jsx)(n.p,{children:"\u2022 Use appropriate guardrail IDs for your use case"}),"\n",(0,t.jsx)(n.p,{children:"\u2022 Test guardrails thoroughly before deployment"}),"\n",(0,t.jsx)(n.p,{children:"\u2022 Keep guardrail versions consistent across environments"}),"\n",(0,t.jsx)(n.p,{children:"\u2022 Document guardrail configurations for maintenance"}),"\n",(0,t.jsx)(n.h3,{id:"2-error-handling",children:"2. Error Handling"}),"\n",(0,t.jsx)(n.p,{children:"\u2022 Implement descriptive error messages"}),"\n",(0,t.jsx)(n.p,{children:"\u2022 Log policy violations appropriately"}),"\n",(0,t.jsx)(n.p,{children:"\u2022 Monitor blocked content patterns"}),"\n",(0,t.jsx)(n.p,{children:"\u2022 Review and update policies regularly"}),"\n",(0,t.jsx)(n.h3,{id:"3-performance-optimization",children:"3. Performance Optimization"}),"\n",(0,t.jsx)(n.p,{children:"\u2022 Configure appropriate timeouts"}),"\n",(0,t.jsx)(n.p,{children:"\u2022 Monitor API response times"}),"\n",(0,t.jsx)(n.p,{children:"\u2022 Cache guardrail results when possible"}),"\n",(0,t.jsx)(n.p,{children:"\u2022 Use appropriate AWS region for reduced latency"}),"\n",(0,t.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,t.jsx)(n.p,{children:"The AWS Bedrock Guardrail plugin is designed for optimal performance while providing robust content filtering capabilities. The plugin maintains a single AWS client instance per plugin instance, reducing the overhead of creating new connections for each request. The implementation includes efficient error handling and logging mechanisms to ensure reliable operation in production environments."}),"\n",(0,t.jsx)(n.p,{children:"Key performance features include:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Efficient AWS client management"}),"\n",(0,t.jsx)(n.li,{children:"Optimized request handling"}),"\n",(0,t.jsx)(n.li,{children:"Comprehensive logging for debugging"}),"\n",(0,t.jsx)(n.li,{children:"Minimal memory footprint"}),"\n",(0,t.jsx)(n.li,{children:"Fast response times for content evaluation"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The plugin's architecture supports concurrent processing with low latency, making it suitable for high-throughput environments. The integration with AWS Bedrock's guardrail system ensures that content evaluation is performed quickly and efficiently, with minimal impact on overall system performance."})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var r=i(96540);const t={},s=r.createContext(t);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);