"use strict";(self.webpackChunkneuraltrust_docs=self.webpackChunkneuraltrust_docs||[]).push([[4587],{8203:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"deployment/architecture","title":"Architecture","description":"NeuralTrust consists of two main components:","source":"@site/docs/deployment/architecture.md","sourceDirName":"deployment","slug":"/deployment/architecture","permalink":"/deployment/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/NeuralTrust/neuraltrust/blob/main/docs/deployment/architecture.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"architecture","title":"Architecture","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/deployment/overview"},"next":{"title":"Kubernetes Installation","permalink":"/deployment/kubernetes/kubernetes-installation"}}');var i=r(4848),t=r(8453);const l={id:"architecture",title:"Architecture",sidebar_position:2},c="Architecture Overview",d={},a=[{value:"Component Details",id:"component-details",level:2},{value:"Data Plane Components",id:"data-plane-components",level:3},{value:"API Service",id:"api-service",level:4},{value:"ClickHouse Database",id:"clickhouse-database",level:4},{value:"Kafka Message Queue",id:"kafka-message-queue",level:4},{value:"Worker Service",id:"worker-service",level:4},{value:"Control Plane Components",id:"control-plane-components",level:3},{value:"Network Architecture",id:"network-architecture",level:2},{value:"Connectivity Requirements",id:"connectivity-requirements",level:3},{value:"Network Diagram",id:"network-diagram",level:3},{value:"Firewall Requirements",id:"firewall-requirements",level:3},{value:"System Requirements",id:"system-requirements",level:2},{value:"Infrastructure Requirements",id:"infrastructure-requirements",level:3},{value:"Required Tools",id:"required-tools",level:3}];function o(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"architecture-overview",children:"Architecture Overview"})}),"\n",(0,i.jsx)(n.p,{children:"NeuralTrust consists of two main components:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Data Plane"})," - Handles data ingestion, processing, and storage"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"API service for receiving and processing traces"}),"\n",(0,i.jsx)(n.li,{children:"ClickHouse database for analytics storage"}),"\n",(0,i.jsx)(n.li,{children:"Kafka for message processing"}),"\n",(0,i.jsx)(n.li,{children:"Worker service for background processing"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Control Plane"})," - Provides the user interface and API for managing applications"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Web application for user interaction"}),"\n",(0,i.jsx)(n.li,{children:"API service for business logic"}),"\n",(0,i.jsx)(n.li,{children:"PostgreSQL database for application data"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important"}),": The Control Plane is managed by NeuralTrust and does not require installation."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"component-details",children:"Component Details"}),"\n",(0,i.jsx)(n.h3,{id:"data-plane-components",children:"Data Plane Components"}),"\n",(0,i.jsx)(n.p,{children:"The Data Plane runs within your infrastructure and includes:"}),"\n",(0,i.jsx)(n.h4,{id:"api-service",children:"API Service"}),"\n",(0,i.jsx)(n.p,{children:"Gateway for all AI interactions:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Processes telemetry data"}),"\n",(0,i.jsx)(n.li,{children:"Routes LLM requests"}),"\n",(0,i.jsx)(n.li,{children:"Handles authentication"}),"\n",(0,i.jsx)(n.li,{children:"Manages rate limiting"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"clickhouse-database",children:"ClickHouse Database"}),"\n",(0,i.jsx)(n.p,{children:"Analytics storage optimized for time-series data:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"2 shards for horizontal scaling"}),"\n",(0,i.jsx)(n.li,{children:"2 replicas per shard"}),"\n",(0,i.jsx)(n.li,{children:"100Gi persistent storage"}),"\n",(0,i.jsx)(n.li,{children:"Time-series optimized queries"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"kafka-message-queue",children:"Kafka Message Queue"}),"\n",(0,i.jsx)(n.p,{children:"Reliable message processing system:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ensures message delivery"}),"\n",(0,i.jsx)(n.li,{children:"Handles event streaming"}),"\n",(0,i.jsx)(n.li,{children:"Enables async operations"}),"\n",(0,i.jsx)(n.li,{children:"Provides message persistence"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"worker-service",children:"Worker Service"}),"\n",(0,i.jsx)(n.p,{children:"Background processing engine:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"AI model interactions"}),"\n",(0,i.jsx)(n.li,{children:"Data aggregation"}),"\n",(0,i.jsx)(n.li,{children:"Security checks"}),"\n",(0,i.jsx)(n.li,{children:"Batch processing"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"control-plane-components",children:"Control Plane Components"}),"\n",(0,i.jsx)(n.p,{children:"The Control Plane is fully managed by NeuralTrust and includes:"}),"\n",(0,i.jsx)("div",{class:"table-wrapper",children:(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Component"}),(0,i.jsx)(n.th,{children:"Purpose"}),(0,i.jsx)(n.th,{children:"Features"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Web Application"})}),(0,i.jsx)(n.td,{children:"Management interface"}),(0,i.jsxs)(n.td,{children:["\u2022 Interactive dashboards",(0,i.jsx)("br",{}),"\u2022 Configuration management",(0,i.jsx)("br",{}),"\u2022 Policy editor",(0,i.jsx)("br",{}),"\u2022 Analytics views"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"API Service"})}),(0,i.jsx)(n.td,{children:"Business logic"}),(0,i.jsxs)(n.td,{children:["\u2022 Authentication services",(0,i.jsx)("br",{}),"\u2022 Policy management",(0,i.jsx)("br",{}),"\u2022 Integration endpoints",(0,i.jsx)("br",{}),"\u2022 Data processing"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"PostgreSQL Database"})}),(0,i.jsx)(n.td,{children:"Data storage"}),(0,i.jsxs)(n.td,{children:["\u2022 Application data",(0,i.jsx)("br",{}),"\u2022 User management",(0,i.jsx)("br",{}),"\u2022 Configuration storage",(0,i.jsx)("br",{}),"\u2022 Policy definitions"]})]})]})]})}),"\n",(0,i.jsx)(n.h2,{id:"network-architecture",children:"Network Architecture"}),"\n",(0,i.jsx)(n.h3,{id:"connectivity-requirements",children:"Connectivity Requirements"}),"\n",(0,i.jsx)(n.p,{children:"The NeuralTrust architecture has specific connectivity requirements:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Data Plane API"})," - This is the only component that requires public internet exposure for:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Receiving telemetry data from client applications"}),"\n",(0,i.jsx)(n.li,{children:"Allowing Control Plane management access"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Internal Components"})," - These should only be accessible within the Kubernetes cluster:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Kafka message queue"}),"\n",(0,i.jsx)(n.li,{children:"ClickHouse database"}),"\n",(0,i.jsx)(n.li,{children:"Worker service"}),"\n",(0,i.jsx)(n.li,{children:"Schema Registry"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"network-diagram",children:"Network Diagram"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ascii",children:"Internet\n   \u2502\n   \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                             \u2502\n\u2502  Kubernetes Cluster                         \u2502\n\u2502                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502             \u2502        \u2502               \u2502   \u2502\n\u2502  \u2502 Ingress     \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 Data Plane    \u2502   \u2502\n\u2502  \u2502 Controller  \u2502        \u2502 API           \u2502   \u2502\n\u2502  \u2502             \u2502        \u2502               \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                 \u2502           \u2502\n\u2502                                 \u25bc           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502             \u2502        \u2502               \u2502   \u2502\n\u2502  \u2502 Worker      \u2502\u25c0\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 Kafka         \u2502   \u2502\n\u2502  \u2502 Service     \u2502        \u2502               \u2502   \u2502\n\u2502  \u2502             \u2502        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502\n\u2502         \u2502                                   \u2502\n\u2502         \u25bc                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                            \u2502\n\u2502  \u2502             \u2502                            \u2502\n\u2502  \u2502 ClickHouse  \u2502                            \u2502\n\u2502  \u2502 Database    \u2502                            \u2502\n\u2502  \u2502             \u2502                            \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502\n\u2502                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h3,{id:"firewall-requirements",children:"Firewall Requirements"}),"\n",(0,i.jsx)(n.p,{children:"Network access requirements:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Inbound Traffic"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Port 443 (HTTPS) to ingress controller"}),"\n",(0,i.jsx)(n.li,{children:"Required for client application access"}),"\n",(0,i.jsx)(n.li,{children:"Needed for Control Plane management"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Outbound Traffic"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Port 443 (HTTPS) from Data Plane API to Control Plane"}),"\n",(0,i.jsx)(n.li,{children:"Port 443 (HTTPS) from Worker to AI services"}),"\n",(0,i.jsx)(n.li,{children:"Access to container registries"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Internal Communication"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Inter-component communication within cluster"}),"\n",(0,i.jsx)(n.li,{children:"Service mesh traffic"}),"\n",(0,i.jsx)(n.li,{children:"Database connections"}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important"}),": NeuralTrust can provide specific IP ranges for more restrictive firewall rules."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"system-requirements",children:"System Requirements"}),"\n",(0,i.jsx)(n.h3,{id:"infrastructure-requirements",children:"Infrastructure Requirements"}),"\n",(0,i.jsx)("div",{class:"table-wrapper",children:(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Component"}),(0,i.jsx)(n.th,{children:"Requirement"}),(0,i.jsx)(n.th,{children:"Details"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Kubernetes"})}),(0,i.jsx)(n.td,{children:"Version"}),(0,i.jsx)(n.td,{children:"1.20+"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Nodes"}),(0,i.jsx)(n.td,{children:"Minimum 3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"CPU/Node"}),(0,i.jsx)(n.td,{children:"4 vCPUs"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Memory/Node"}),(0,i.jsx)(n.td,{children:"16 GB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Storage"})}),(0,i.jsx)(n.td,{children:"ClickHouse"}),(0,i.jsx)(n.td,{children:"100Gi per node"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Kafka"}),(0,i.jsx)(n.td,{children:"50Gi per broker"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Total Resources"})}),(0,i.jsx)(n.td,{children:"CPU"}),(0,i.jsx)(n.td,{children:"12+ vCPUs"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Memory"}),(0,i.jsx)(n.td,{children:"48+ GB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Storage"}),(0,i.jsx)(n.td,{children:"300+ GB"})]})]})]})}),"\n",(0,i.jsx)(n.h3,{id:"required-tools",children:"Required Tools"}),"\n",(0,i.jsx)(n.p,{children:"Essential tools for deployment and management:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"kubectl"}),": For interacting with the Kubernetes cluster"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"helm"})," (v3.8+): For deploying Kubernetes applications"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"yq"}),": For YAML processing"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"jq"}),": For JSON processing"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>c});var s=r(6540);const i={},t=s.createContext(i);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);